---
import { type NavItem } from "../../types";
const { navItems } = Astro.props;
---

<nav class="relative block align-center sm:hidden">
  <!-- Hamburger Button / X -->
  <button id="hamburger" class="focus:outline-none">
    <svg
      id="hamburger-icon"
      fill="currentColor"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 20 20"
      class="text-black h-6 w-6 block"
    >
      <rect width="20" height="2" x="0" y="7" rx="1"></rect>
      <rect width="20" height="2" x="0" y="12" rx="1"></rect>
      <rect width="20" height="2" x="0" y="17" rx="1"></rect>
    </svg>
    <svg
      id="close-icon"
      fill="currentColor"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 20 20"
      class="text-black h-6 w-6 hidden"
    >
      <path
        d="M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"
      ></path>
    </svg>
  </button>

  <!-- Dropdown Page Menu -->
  <div
    id="nav-links"
    class="hidden absolute right-0 mt-2 py-2 w-48 bg-gray-100 rounded-lg shadow-xl"
  >
    {
      navItems.map((item: NavItem) => (
        <a
          href={item.path}
          class="block px-4 py-2 text-gray-800 hover:underline"
        >
          {item.label}
        </a>
      ))
    }
  </div>
</nav>

<script>
  function toggleHidden(x: HTMLElement) {
    x.classList.toggle("hidden");
  }

  const hamburger = document.getElementById("hamburger");
  if (!hamburger) {
    throw new Error("Hamburger button not found");
  }

  hamburger.addEventListener("click", function () {
    var navLinks = document.getElementById("nav-links");
    var hamburgerIcon = document.getElementById("hamburger-icon");
    var closeIcon = document.getElementById("close-icon");

    if (!navLinks || !hamburgerIcon || !closeIcon) {
      throw new Error("One or more elements not found");
    }

    // Toggle the display of the navigation links
    toggleHidden(navLinks);
    toggleHidden(hamburgerIcon);
    toggleHidden(closeIcon);
  });
</script>
